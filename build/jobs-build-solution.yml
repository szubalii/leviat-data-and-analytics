parameters:
- name: solutions
  type: object

jobs:
- ${{ each solution in parameters.solutions }}:
  - ${{ if parameters.solutions[solution] }}:
    - job: BUILD_${{ upper(replace(folder, '-', '_')) }}
      pool:
        name: 'VM'
        demands:
        - node.js
        - VisualStudio
        - Agent.ComputerName -equals $(VMName)
      steps:
      - template: ../${{ folder }}/build/steps-build.yml
      - template: ../${{ folder }}/build/steps-artifact.yml