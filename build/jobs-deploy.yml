# Dynamic Deployment Job
parameters:
- name: env
  type: string
  default: TEST
- name: varTemplate
  type: string
  default: ./variables-test.yml
- name: path
  type: string
- name: solution
  type: string



jobs:
- deployment: Deploy_${{parameters.solution}}
  variables:
  - name: pathPrefix
    value: $(Pipeline.Workspace)
  - template: ${{ parameters.varTemplate }}
  pool:
    name: 'VM'
    demands:
    - node.js
    - VisualStudio
    - Python.Version
    - Agent.Name -equals $(VMName)
  environment: ${{ parameters.env }}
  strategy:
    runOnce:
      deploy:
        steps:
        - template: ../${{parameters.path}}/build/steps-deploy.yml
