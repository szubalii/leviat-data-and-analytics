trigger:
# - main
- none

parameters:
- name: adf
  displayName: Build & Deploy Azure Data Factory
  type: boolean
  default: true
- name: orchdb
  displayName: Build & Deploy Orchestration DB
  type: boolean
  default: true
- name: syn
  displayName: Build & Deploy Synapse DWH
  type: boolean
  default: true
- name: xu
  displayName: Build & Deploy Theobald Xtract Universal
  type: boolean
  default: true

variables:
- group: DnA_DEV
- group: KeyVault_DEV
- name: xuPrefix
  value: "$(environment)"

jobs:
# - template: ./jobs-pre-build.yml
- template: ./jobs-build.yml
  parameters:
    deploy: true
    adf: ${{ parameters.adf }}
    orchdb: ${{ parameters.orchdb }}
    syn: ${{ parameters.syn }}
    xu: ${{ parameters.xu }}

# stages:
# # - template: ./stages-pre-build.yml

# - template: ./stages-build.yml
#   parameters:
#     artifact: true

# - stage: deploy
#   jobs:
#   - template: ./jobs-deploy.yml

# - stage: test
#   jobs:
#   - template: ./jobs-test.yml

