steps:
- task: AzureFileCopy@4
  displayName: 'AzureBlob File Copy Master Data Generic'
  inputs:
    SourcePath: '$(Build.Repository.LocalPath)/orchestration/Master Data/*'
    azureSubscription: 'Leviat-we-sub-01 (f199b488-7d9d-4992-aeda-c10a1e1c9b9e)'
    Destination: AzureBlob
    storage: '$(storageAccountName)'
    ContainerName: 'orch-db'

- task: SqlAzureDacpacDeployment@1
  displayName: 'Azure SQL DacpacTask'
  inputs:
    azureSubscription: 'arm-pipeline'
    AuthenticationType: servicePrincipal
    ServerName: '$(sqlServerName)'
    DatabaseName: '$(sqlDatabaseName)'
    DacpacFile: '$(Build.Repository.LocalPath)/orchestration/sqldb-xxxx-orchdb-d-euw-001/bin/Release/sqldb-xxxx-orchdb-d-euw-001.dacpac'
    AdditionalArguments: '/v:masterKeyPwd=$(sqlsrv-xxxx-sls-x-euw-001-masterKeyPwd) /v:sasToken_OrchDB=$(sasToken-OrchDB) /v:containerURL=$(orchDBContainerURL)'
