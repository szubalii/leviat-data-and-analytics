# Theobald Xtract Universal Deploy Job
parameters:
- name: env
  type: string
  default: DEV
- name: varGroup
  type: string
  default: DnA_DEV
- name: keyVaultVarGroup
  type: string
  default: KeyVault_DEV

jobs:
- deployment: XtractUniversalDeploy
  dependsOn: XtractUniversalBuild
  pool:
    name: 'VM'
    demands:
    - node.js
    - VisualStudio
  variables:
  - name: pathPrefix
    value: $(Pipeline.Workspace)
  - group: ${{ parameters.varGroup }}
  - group: ${{ parameters.keyVaultVarGroup }}
  environment: ${{ parameters.env }}
  strategy:
    runOnce:
      deploy:
        steps:
        - template: ./steps-deploy.yml